

-- some sample quries:
-- 2/8 is ripe managed, 9 is ripe id

select route, source_id from routes where route && '2.0.0.0/8' and source_id <> 9 ;


-- find all prefix covered/covering a ripe prefix with a different source than ripe

SELECT a.route, a.source_id
FROM routes as a
    JOIN managed_routes AS b ON (a.route && b.route)
WHERE b.source_id = 9 AND a.source_id <> 9;


SELECT a.source_id, count(*)
FROM routes as a
    JOIN managed_routes AS b ON (a.route && b.route)
WHERE b.source_id = 9 AND a.source_id <> 9
group by a.source_id;

where a.route && '2.0.0.0/8' and source_id <> 9 ;


-- where a.route && '2.0.0.0/8' and source_id <> 9 ;



